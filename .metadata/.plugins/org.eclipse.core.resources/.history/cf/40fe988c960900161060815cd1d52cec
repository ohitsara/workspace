import java.io.*;
import java.util.*;
import java.text.ParseException;
import java.text.SimpleDateFormat;

public class ReadCalendarFile {
	
	private static ArrayList<Integer> stime = new ArrayList<Integer>();
	
	public static void main(String [] args) throws IOException, ParseException{
		/*
		 * @override
		 * Initializations for the iteration
		 * of while loop
		 */
		Scanner in = new Scanner(System.in); 
		String file;
		ArrayList<String> list = new ArrayList<String>(); //storage .ics files from user
		
		System.out.println("Please input your iCal file(s):");
		while ((file = in.nextLine()).length( ) > 0){
			list.add(file);
		}//end of while loop
		in.close();
		
		/*
		 * @override
		 * Initializations for reading the
		 * multiple .ics files
		 */
		
		String fileName			= null;
		String line				= null;
		String eventStartTime	= null;
		String eventDate		= null;
		String[] event			= new String[2];
		String[] eventTime		= new String[2];
		
		
		for(int i = 0; i < list.size(); i++){	
			try{
				fileName = list.get(i);
				FileReader fr = new FileReader(fileName);
				BufferedReader br = new BufferedReader(fr);
				
				while((line = br.readLine()) != null) {
					if (line.contains("DTSTART")){
		            	line = line.substring(0, line.length()-1);
		                event = line.split(":", 2);
		    	        eventTime = event[1].split("T", 2);
		    	        eventStartTime = eventTime[1];
		    	        eventDate = eventTime[0];

		    	        int eventST = Integer.parseInt(eventStartTime);
		    	        stime.add(eventST);
		    	        Date stime = new SimpleDateFormat("hhmm").parse(String.format("%04d", eventST));
		    	        SimpleDateFormat sdf = new SimpleDateFormat("hh:mm a");
		    	        eventStartTime = sdf.format(stime);
		    	            
		    	        System.out.println(eventStartTime);
		    	        	
		            }//end of 1st if in while
				}//end of while loop
			}//end of try      
			catch(FileNotFoundException ex) {
				System.out.println("Unable to open file '" + fileName + "'");                
			}//end of 1st catch
			catch(IOException ex) {
				System.out.println("Error reading file '" + fileName + "'");                  
            }//end of 2nd catch
		}//end of for loop
	}//end of main
	public void TimeSort(){
		Integer [] timeCheck = new Integer[stime.size()];
		timeCheck = stime.toArray(timeCheck);
		Arrays.sort(timeCheck);
		
	}

}//end of class
